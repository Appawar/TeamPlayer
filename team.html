<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Static Player Match</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background-color: #f9f9f9;
      color: #333;
    }
    h2, h3 {
      color: #007bff;
    }
    table {
      width: 100%;
      margin-top: 20px;
      border-collapse: collapse;
      background: white;
      box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1);
    }
    th, td {
      padding: 12px;
      border: 1px solid #ddd;
      text-align: center;
    }
    th {
      background-color: #007bff;
      color: white;
      font-weight: bold;
    }
    td button {
      padding: 8px 16px;
      font-size: 14px;
      margin: 5px;
      border: none;
      cursor: pointer;
      border-radius: 4px;
      transition: background-color 0.3s ease;
    }
    td button:hover {
      opacity: 0.8;
    }
    .add-btn {
      background-color: #28a745;
      color: white;
    }
    .delete-btn {
      background-color: #dc3545;
      color: white;
    }
    .score-btn {
      background-color: #007bff;
      color: white;
    }
    .disabled-btn {
      background-color: #d6d6d6;
      color: #aaa;
      cursor: not-allowed;
    }
    .winner {
      color: green;
      font-weight: bold;
    }
    .loser {
      color: red;
      font-weight: bold;
    }
  </style>
</head>
<body>

  <h2>Static Player List</h2>

  <input type="text" id="playerInput" placeholder="Enter Player Name" style="padding: 8px; margin-right: 10px;">
  <button onclick="addPlayer()" class="add-btn">Add Player</button>
  <button onclick="generateMatches()" class="add-btn">Generate Matches</button>

  <table id="playerTable">
    <thead>
      <tr><th>Player</th><th>Action</th></tr>
    </thead>
    <tbody></tbody>
  </table>

  <h3>Match Pairings</h3>
  <table id="matchTable">
    <thead>
      <tr>
        <th>Player 1</th><th>Score</th><th>Player 2</th><th>Score</th><th>Winner (11+ pts & 2+ lead)</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <script>
    let players = ["VishWajit", "Aajay", "Atherva", "rithik", "Divyap", "Harshal", "Shubhangi", "Harshda", "Viraj", "AjayA", "Shruti", "Raksha", "Mangesh", "shreyas", "Mansi", "Pournima", "Nidhi", "Gauri", "Rehan", "Mohini", "Soham", "Aishwarya"];
    let matches = [];

    function renderPlayers() {
      const tbody = document.querySelector("#playerTable tbody");
      tbody.innerHTML = "";
      players.forEach((p, index) => {
        const row = `<tr>
          <td>${p}</td>
          <td><button onclick="deletePlayer(${index})" class="delete-btn">Delete</button></td>
        </tr>`;
        tbody.innerHTML += row;
      });
    }

    function addPlayer() {
      const name = document.getElementById("playerInput").value.trim();
      if (name && !players.includes(name)) {
        players.push(name);
        renderPlayers();
        document.getElementById("playerInput").value = "";
      }
    }

    function deletePlayer(index) {
      players.splice(index, 1);
      renderPlayers();
    }

    function shuffle(arr) {
      for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
    }

    function generateMatches() {
      const tbody = document.querySelector("#matchTable tbody");
      tbody.innerHTML = "";
      matches = [];

      const tempPlayers = [...players];
      shuffle(tempPlayers);

      for (let i = 0; i < tempPlayers.length - 1; i += 2) {
        const p1 = tempPlayers[i];
        const p2 = tempPlayers[i + 1];
        matches.push({ p1, p2, score1: 0, score2: 0, winner: "-" });
      }

      renderMatches();
    }

    function renderMatches() {
      const tbody = document.querySelector("#matchTable tbody");
      tbody.innerHTML = "";

      matches.forEach((match, index) => {
        const row = `<tr>
          <td>${match.p1}<br>
            <button onclick="updateScore(${index}, 'score1', 1)" ${match.score1 >= 11 || match.winner !== '-' ? 'class="disabled-btn"' : 'class="score-btn"'}>+</button>
            <button onclick="updateScore(${index}, 'score1', -1)" ${match.score1 === 0 || match.winner !== '-' ? 'class="disabled-btn"' : 'class="score-btn"'}>-</button>
          </td>
          <td>${match.score1}</td>

          <td>${match.p2}<br>
            <button onclick="updateScore(${index}, 'score2', 1)" ${match.score2 >= 11 || match.winner !== '-' ? 'class="disabled-btn"' : 'class="score-btn"'}>+</button>
            <button onclick="updateScore(${index}, 'score2', -1)" ${match.score2 === 0 || match.winner !== '-' ? 'class="disabled-btn"' : 'class="score-btn"'}>-</button>
          </td>
          <td>${match.score2}</td>
          <td class="${match.winner !== '-' ? (match.winner === match.p1 ? 'winner' : 'loser') : ''}">${match.winner === '-' ? 'In Progress' : match.winner}</td>
        </tr>`;
        tbody.innerHTML += row;
      });
    }

    function updateScore(index, key, delta) {
      // Prevent score from exceeding 11
      if (matches[index].winner !== '-' || (matches[index][key] >= 11 && delta > 0)) return;

      // Prevent negative score if the score is already 0
      if (delta === -1 && matches[index][key] === 0) return;

      // Update score
      matches[index][key] += delta;

      const { score1, score2, p1, p2 } = matches[index];

      // Check for winner
      if ((score1 >= 11 || score2 >= 11) && Math.abs(score1 - score2) >= 2) {
        matches[index].winner = score1 > score2 ? p1 : p2;
      } else {
        matches[index].winner = "-";
      }

      renderMatches();
    }

    window.onload = renderPlayers;
  </script>
</body>
</html>
